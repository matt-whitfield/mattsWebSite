---
import Layout from '../layouts/Layout.astro';
import ContactCTA from '../components/ContactCTA.astro';
import StyledLink from '../components/StyledLink.astro';
import Button from '../components/Button.astro';
---

<Layout 
  title="Contact Matt | Web Designer & Developer"
  description="Get in touch with Matt Whitfield for web design and development services. Book a consultation or send a message to discuss your project needs."
>
	<main class="bg-white">
		<!-- Hero Section with Full-Width Background -->
		<section class="w-full relative pt-48 pb-20">
			<!-- Full-width background gradient that spans the entire section width -->
			<div class="absolute inset-0 w-full h-full bg-gradient-to-br from-white via-white to-primary/10"></div>
			
			<div class="page-container relative z-1">
				<div class="flex flex-col md:flex-row gap-12 md:gap-20 items-start">
					<!-- Text Content -->
					<div class="md:w-2/3">
						<h1 class="neo-heading text-5xl md:text-6xl lg:text-7xl mb-8 text-text">Get In Touch</h1>
						
						<div class="neo-card-base py-10 px-8 md:px-12 mt-8 mb-12 relative">
							<p class="neo-text text-lg mb-4">
								Looking to elevate your online presence? I'd love to chat about how we can work together to create a website that helps your business thrive.
							</p>
							
							<p class="neo-text text-lg">
								Whether you need a new site, a redesign, or marketing help, I'm here to make your online presence work harder for your business.
							</p>
							
							<div class="absolute -top-6 -right-6 p-2 bg-primary border-3 border-black text-white font-serif font-bold text-base uppercase rotate-3">
								Let's Connect
							</div>
						</div>
					</div>
					
					<!-- Contact Methods (moved from below) -->
					<div class="md:w-1/3">
						<div class="relative w-full">
							<div class="neo-card-base p-8 border-3 border-black bg-white contact-details-card relative">
								<h2 class="neo-heading text-2xl mb-6">Contact Details</h2>
								
								<div class="space-y-6">
									<div>
										<h3 class="font-serif font-bold text-lg mb-2">Email</h3>
										<a href="mailto:hello@mattwhitfield.com" class="neo-link-base neo-link-primary">hello@mattwhitfield.com</a>
									</div>
									
									<div>
										<h3 class="font-serif font-bold text-lg mb-2">Follow Me</h3>
										<div class="flex gap-4">
											<a href="https://www.linkedin.com/in/matt--whitfield/" target="_blank" rel="noopener" class="inline-block p-2 border-3 border-black hover:bg-primary hover:text-white transition-colors duration-200">
												<span class="i-carbon-logo-linkedin w-6 h-6"></span>
												<span class="sr-only">LinkedIn</span>
											</a>
											<a href="https://www.instagram.com/_mattwhitfield/" target="_blank" rel="noopener" class="inline-block p-2 border-3 border-black hover:bg-primary hover:text-white transition-colors duration-200">
												<span class="i-carbon-logo-instagram w-6 h-6"></span>
												<span class="sr-only">Instagram</span>
											</a>
										</div>
									</div>
									
									<div>
										<h3 class="font-serif font-bold text-lg mb-2">Based in</h3>
										<p class="neo-text">Portland, Oregon</p>
									</div>
								</div>
								
								<!-- Design elements to match about.astro styling -->
								<div class="absolute -top-3 -right-3 h-6 w-6 bg-primary border-3 border-black"></div>
								<div class="absolute -bottom-3 -left-3 h-6 w-6 bg-mint border-3 border-black"></div>
							</div>
							
							<div class="absolute -bottom-4 -right-4 p-2 bg-primary border-3 border-black text-white font-medium rotate-6">
								Get in touch!
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Contact Form Section -->
		<section class="w-full py-12 md:py-16">
			<div class="page-container">
				<!-- Contact Form -->
				<div class="neo-card-base p-8 border-3 border-black bg-white shadow-neo">
					<h2 id="contact-form" class="neo-heading text-2xl mb-6">Send a Message</h2>
							
							<form class="space-y-6" netlify name="contact" method="POST" aria-labelledby="contact-form">
								<!-- Honeypot field for spam prevention -->
								<div style="display:none;">
									<label for="website">Website</label>
									<input type="text" id="website" name="website" tabindex="-1" autocomplete="off" />
								</div>
								
								<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
									<div>
										<label for="name" class="block font-serif font-bold mb-2">Name</label>
										<input 
											type="text" 
											id="name" 
											name="name" 
											class="w-full p-3 border-3 border-black focus:border-primary focus:outline-none" 
											placeholder="Your name"
											aria-required="true"
											required
											minlength="2"
										/>
										<div class="text-sm mt-1 text-red-600 hidden error-message" id="name-error">Please enter your name</div>
									</div>
									
									<div>
										<label for="email" class="block font-serif font-bold mb-2">Email</label>
										<input 
											type="email" 
											id="email" 
											name="email" 
											class="w-full p-3 border-3 border-black focus:border-primary focus:outline-none" 
											placeholder="your@email.com"
											aria-required="true"
											required
										/>
										<div class="text-sm mt-1 text-red-600 hidden error-message" id="email-error">Please enter a valid email address</div>
									</div>
								</div>
								
								<div>
									<label for="subject" class="block font-serif font-bold mb-2">Subject</label>
									<input 
										type="text" 
										id="subject" 
										name="subject" 
										class="w-full p-3 border-3 border-black focus:border-primary focus:outline-none" 
										placeholder="What's this about?"
										aria-required="true"
										required
									/>
									<div class="text-sm mt-1 text-red-600 hidden error-message" id="subject-error">Please enter a subject</div>
								</div>
								
								<div>
									<label for="message" class="block font-serif font-bold mb-2">Message</label>
									<textarea 
										id="message" 
										name="message" 
										rows="5" 
										class="w-full p-3 border-3 border-black focus:border-primary focus:outline-none" 
										placeholder="Tell me about your project..."
										aria-required="true"
										required
										minlength="10"
									></textarea>
									<div class="text-sm mt-1 text-red-600 hidden error-message" id="message-error">Please enter your message (at least 10 characters)</div>
								</div>
								
								<div class="flex justify-end">
									<button type="submit" class="inline-block font-serif font-bold uppercase tracking-wider border-3 border-black bg-primary text-white py-2 px-6 shadow-neo hover:bg-white hover:text-primary hover:shadow-neo-sm hover:translate-x-[2px] hover:translate-y-[2px] transition-all duration-200">
										Send Message
									</button>
								</div>
							</form>
							
							<!-- Success message (hidden by default) -->
							<div id="form-success" class="hidden mt-6 p-4 border-3 border-black bg-mint/20">
								<p class="font-serif font-bold text-lg mb-2">Message Sent!</p>
								<p class="neo-text">Thank you for your message. I'll get back to you within 1 business day.</p>
							</div>
							
							<!-- Error message (hidden by default) -->
							<div id="form-error" class="hidden mt-6 p-4 border-3 border-black bg-primary/20">
								<p class="font-serif font-bold text-lg mb-2">Oops! Something went wrong.</p>
								<p class="neo-text">Please try again or email me directly at <a href="mailto:hello@mattwhitfield.com" class="neo-link-base neo-link-primary">hello@mattwhitfield.com</a>.</p>
							</div>
						</div>
				</div>
			</div>
		</section>

		<!-- Next Steps Section -->
		<section class="w-full py-12 md:py-16 relative">
			<div class="page-container">
				<div class="neo-card-base p-8 md:p-12 border-3 border-black bg-gradient-to-br from-white to-mint/10 shadow-neo-mint relative">
					<h2 class="neo-heading text-3xl md:text-4xl mb-6">What Happens Next?</h2>
					
					<div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
						<div class="relative">
							<div class="absolute -top-3 -left-3 w-8 h-8 rounded-full bg-primary text-white font-serif font-bold flex items-center justify-center border-3 border-black">1</div>
							<h3 class="font-serif font-bold text-xl mb-2 pl-6">Initial Consultation</h3>
							<p class="neo-text">We'll discuss your business goals and how a website can help you achieve them.</p>
						</div>
						
						<div class="relative">
							<div class="absolute -top-3 -left-3 w-8 h-8 rounded-full bg-primary text-white font-serif font-bold flex items-center justify-center border-3 border-black">2</div>
							<h3 class="font-serif font-bold text-xl mb-2 pl-6">Proposal</h3>
							<p class="neo-text">I'll create a detailed plan tailored to your specific needs and budget.</p>
						</div>
						
						<div class="relative">
							<div class="absolute -top-3 -left-3 w-8 h-8 rounded-full bg-primary text-white font-serif font-bold flex items-center justify-center border-3 border-black">3</div>
							<h3 class="font-serif font-bold text-xl mb-2 pl-6">Collaboration</h3>
							<p class="neo-text">We'll work together to create a website that perfectly represents your brand.</p>
						</div>
					</div>
					
					<p class="neo-text text-lg max-w-prose mx-auto text-center mb-8">Ready to take the first step? Schedule a consultation using the calendar below, or send me a message and I'll get back to you within 1 business day.</p>
					
					<div class="text-center">
						<Button href="#calendar" variant="primary" size="lg">Schedule a Call</Button>
					</div>
					
					<div class="absolute -top-4 -right-4 h-8 w-8 bg-mint border-3 border-black"></div>
					<div class="absolute -bottom-4 -left-4 h-8 w-8 bg-primary border-3 border-black"></div>
				</div>
			</div>
		</section>

		<!-- Calendar Booking Section -->
		<section id="calendar" class="w-full py-12 md:py-16">
			<div class="page-container">
				<h2 class="neo-heading text-3xl md:text-4xl mb-8 text-center">Book a Consultation</h2>
				
				<div class="neo-card-base p-8 border-3 border-black bg-white shadow-neo">
					<div class="flex flex-col lg:flex-row gap-10 items-start">
						<div class="lg:w-1/3">
							<h3 class="font-serif font-bold text-2xl mb-4">Schedule a Call</h3>
							<p class="neo-text mb-6">Choose a time that works best for you. Our initial consultation is free and will take approximately 30 minutes.</p>
							
							<div class="space-y-4 mb-8">
								<div class="flex items-start gap-3">
									<div class="flex-shrink-0 mt-1">
										<div class="w-5 h-5 rounded-full bg-primary border-2 border-black"></div>
									</div>
									<p class="neo-text">Select an available time slot from the calendar</p>
								</div>
								
								<div class="flex items-start gap-3">
									<div class="flex-shrink-0 mt-1">
										<div class="w-5 h-5 rounded-full bg-primary border-2 border-black"></div>
									</div>
									<p class="neo-text">Fill in your details to confirm the appointment</p>
								</div>
								
								<div class="flex items-start gap-3">
									<div class="flex-shrink-0 mt-1">
										<div class="w-5 h-5 rounded-full bg-primary border-2 border-black"></div>
									</div>
									<p class="neo-text">You'll receive a confirmation email with call details</p>
								</div>
							</div>
							
							<div class="p-4 border-3 border-black bg-mint/10">
								<p class="neo-text font-bold">Not sure about booking yet?</p>
								<p class="neo-text mb-4">Send a message through the contact form above, and I'll get back to you within 1 business day.</p>
								<Button href="#contact-form" variant="mint" size="sm">Go to Contact Form</Button>
							</div>
						</div>
						
						<!-- Google Calendar Embed -->
						<div class="lg:w-2/3 w-full h-[600px] relative" aria-labelledby="calendar-embed-title">
							<h3 id="calendar-embed-title" class="sr-only">Google Calendar Booking System</h3>
							<div class="border-3 border-black shadow-neo w-full h-full">
								<iframe 
									src="https://calendar.google.com/calendar/appointments/schedules/AcZssZ2Wm0cD38vsz7dIFtssr6mNS2PXQylNtrnO1P-qZS2dK61tcdtehr6pVD8AhxHAHb6Ekh28sRBJ?gv=true" 
									style="width:100%; height:100%;" 
									frameborder="0"
									title="Schedule an appointment with Matt Whitfield"
									loading="lazy"
									sandbox="allow-same-origin allow-scripts allow-forms allow-popups"
									aria-label="Google Calendar appointment scheduling interface"
								></iframe>
							</div>
							
							<!-- Decorative elements -->
							<div class="absolute -top-4 -right-4 h-8 w-8 bg-primary border-3 border-black"></div>
							<div class="absolute -bottom-4 -left-4 h-8 w-8 bg-mint border-3 border-black"></div>
						</div>
					</div>
					
					<div class="text-center mt-8">
						<p class="neo-text text-sm">
							Need a different time? Send me an email at 
							<a href="mailto:hello@mattwhitfield.xyz" class="neo-link-base neo-link-primary">hello@mattwhitfield.xyz</a>
						</p>
					</div>
				</div>
			</div>
		</section>
		
	</main>
</Layout>

<style>
/* Neo-brutalist card base styles */
.neo-card-base {
  position: relative;
}

/* Additional styling specific to the contact page */
form input:focus, form textarea:focus {
  box-shadow: 4px 4px 0 0 rgba(255,107,53,1);
  border-color: var(--primary);
  outline: none;
}

/* Improved hover states */
form input:hover, form textarea:hover {
  border-color: var(--primary);
}

/* Error state styling */
.error-message:not(.hidden) + input,
.error-message:not(.hidden) + textarea {
  border-color: #e53e3e;
}

/* Add appropriate transitions */
form input, form textarea, form button {
  transition: all 0.2s ease-in-out;
}
</style>

<!-- Structured data for better SEO -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ContactPage",
    "name": "Contact Matt Whitfield | Web Design & Development",
    "description": "Get in touch with Matt Whitfield for web design and development services. Book a consultation or send a message to discuss your project needs.",
    "url": "https://mattwhitfield.com/contact",
    "mainEntity": {
      "@type": "Person",
      "name": "Matt Whitfield",
      "jobTitle": "Web Designer & Developer",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Portland",
        "addressRegion": "OR"
      },
      "email": "hello@mattwhitfield.com"
    }
  }
</script>

<script>
  // Handle form submission
  document.addEventListener('DOMContentLoaded', () => {
    const contactForm = document.querySelector('form') as HTMLFormElement;
    const successMessage = document.getElementById('form-success');
    const errorMessage = document.getElementById('form-error');
    
    if (contactForm) {
      contactForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // Client-side validation
        const nameInput = document.getElementById('name') as HTMLInputElement;
        const emailInput = document.getElementById('email') as HTMLInputElement;
        const subjectInput = document.getElementById('subject') as HTMLInputElement;
        const messageInput = document.getElementById('message') as HTMLTextAreaElement;
        
        const nameError = document.getElementById('name-error');
        const emailError = document.getElementById('email-error');
        const subjectError = document.getElementById('subject-error');
        const messageError = document.getElementById('message-error');
        
        // Reset error messages
        document.querySelectorAll('.error-message').forEach(el => {
          el.classList.add('hidden');
        });
        
        // Validate form
        let isValid = true;
        
        if (!nameInput.value.trim() || nameInput.value.length < 2) {
          if (nameError) nameError.classList.remove('hidden');
          isValid = false;
        }
        
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailInput.value.trim() || !emailRegex.test(emailInput.value)) {
          if (emailError) emailError.classList.remove('hidden');
          isValid = false;
        }
        
        if (!subjectInput.value.trim()) {
          if (subjectError) subjectError.classList.remove('hidden');
          isValid = false;
        }
        
        if (!messageInput.value.trim() || messageInput.value.length < 10) {
          if (messageError) messageError.classList.remove('hidden');
          isValid = false;
        }
        
        if (!isValid) return;
        
        try {
          const formData = new FormData(contactForm);
          const response = await fetch(contactForm.action, {
            method: 'POST',
            body: formData,
            headers: {
              'Accept': 'application/json'
            }
          });
          
          if (response.ok) {
            // Show success message
            contactForm.reset();
            contactForm.style.display = 'none';
            if (successMessage) successMessage.classList.remove('hidden');
          } else {
            // Show error message
            if (errorMessage) errorMessage.classList.remove('hidden');
          }
        } catch (error) {
          // Show error message
          if (errorMessage) errorMessage.classList.remove('hidden');
        }
      });
    }
    
    // Smooth scroll for internal links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(this: HTMLAnchorElement, e: Event) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        if (targetId) {
          const targetElement = document.querySelector(targetId);
          
          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        }
      });
    });
  });
</script>
